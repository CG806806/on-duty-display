<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>è¿ç»´ä¿éšœä¸­å¿ƒæ¯æ—¥å€¼ç­è¡¨</title>
  <style>
    :root {
      --primary-color: #0052cc;  /* ç»å…¸çš„æ·±è“ */
      --header-bg: #f4f5f7;      /* è¡¨å¤´ç° */
      --border-color: #dfe1e6;   /* è¾¹æ¡†è‰² */
      --highlight-bg: #e3fcef;   /* ä¸»å€¼ç­é«˜äº®èƒŒæ™¯(æ·¡ç»¿) */
      --text-main: #172b4d;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, "Microsoft YaHei", sans-serif;
      background: #ffffff;
      color: var(--text-main);
      overflow-x: hidden; /* é˜²æ­¢æ¨ªå‘æ»šåŠ¨æ¡ */
    }

    /* å®¹å™¨è®¾ä¸ºæµå¼å¸ƒå±€ï¼Œå‡ ä¹é“ºæ»¡å…¨å± */
    .container {
      width: 98%;
      margin: 20px auto;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 0 10px;
    }

    h1 {
      font-size: 1.8rem;
      margin: 0;
      color: #0052cc;
    }

    .update-time {
      font-size: 1rem;
      font-weight: bold;
      color: #5e6c84;
    }

    /* æ ¸å¿ƒè¡¨æ ¼æ ·å¼ */
    .full-table {
      width: 100%;
      border-collapse: collapse; /* åˆå¹¶è¾¹æ¡† */
      background: #fff;
      font-size: 1.1rem; /* å­—å·åŠ å¤§ï¼Œå¤§å±çœ‹æ›´æ¸…æ¥š */
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    /* è¡¨å¤´ */
    .full-table th {
      background: var(--header-bg);
      color: #42526e;
      font-weight: 700;
      padding: 18px;
      text-align: left;
      border: 1px solid var(--border-color);
      text-transform: uppercase;
    }

    /* å•å…ƒæ ¼ */
    .full-table td {
      padding: 16px 20px;
      border: 1px solid var(--border-color);
      vertical-align: middle;
    }

    /* ç»„ååˆ—ï¼šåŠ ç²—å±…ä¸­ */
    .group-cell {
      font-weight: 800;
      background-color: #fafbfc;
      color: #0052cc;
      text-align: center !important;
      width: 20%;
    }

    /* è§’è‰²æ ‡ç­¾ */
    .role-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 0.9rem;
      font-weight: bold;
    }

    .role-primary {
      background: #deebff;
      color: #0052cc;
    }

    .role-secondary {
      background: #eae6ff;
      color: #403294;
    }

    /* å§“ååˆ— */
    .name-cell {
      font-weight: 600;
      font-size: 1.15rem;
      width: 25%;
    }

    /* ç”µè¯åˆ— */
    .phone-link {
      font-family: Consolas, Monaco, monospace;
      font-size: 1.2rem;
      font-weight: 600;
      color: #333;
      text-decoration: none;
      letter-spacing: 1px;
    }
    
    .phone-link:hover {
      color: #0052cc;
      text-decoration: underline;
    }

    /* ä¸»å€¼ç­è¡Œç¨å¾®é«˜äº®ï¼Œçªå‡ºé‡ç‚¹ */
    tr.is-primary {
      background-color: rgba(222, 235, 255, 0.15);
    }

    /* é”™è¯¯æç¤º */
    #error-box {
        color: #dc2626;
        background: #fee2e2;
        padding: 20px;
        text-align: center;
        display: none;
        border: 1px solid #fca5a5;
        margin: 20px;
    }
    
    /* ç§»åŠ¨ç«¯ç®€å•é€‚é… */
    @media (max-width: 768px) {
      .full-table { font-size: 0.9rem; }
      .phone-link { font-size: 1rem; }
      .group-cell { width: 25%; }
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <h1>ğŸ›¡ï¸ è¿ç»´ä¿éšœä¸­å¿ƒæ¯æ—¥å€¼ç­è¡¨</h1>
      <div class="update-time">ğŸ“… æ›´æ–°æ—¶é—´ï¼š<span id="update-time">Loading...</span></div>
    </header>

    <div id="error-box"></div>

    <table class="full-table">
      <thead>
        <tr>
          <th style="text-align:center">ä¸šåŠ¡ç»„</th>
          <th>è§’è‰²</th>
          <th>å§“å</th>
          <th>è”ç³»ç”µè¯</th>
        </tr>
      </thead>
      <tbody id="table-body">
        <!-- JS å°†åœ¨è¿™é‡Œæ’å…¥è¡¨æ ¼è¡Œ -->
      </tbody>
    </table>
  </div>

  <script>
    // ä¿æŒä¹‹å‰çš„ fetch é€»è¾‘ï¼Œå› ä¸ºå®ƒå·²ç»é€šäº†
    fetch('./data.json?t=' + new Date().getTime())
      .then(res => {
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        return res.json();
      })
      .then(data => {
        document.getElementById('update-time').textContent = data.updateTime;
        const tbody = document.getElementById('table-body');
        tbody.innerHTML = ''; 

        if (!data.groups) throw new Error('No groups data found');

        data.groups.forEach(group => {
          // æˆ‘ä»¬è¦ç”Ÿæˆä¸¤è¡Œï¼šä¸€è¡Œæ˜¯ä¸»å€¼ç­ï¼Œä¸€è¡Œæ˜¯è¾…å€¼ç­
          // ç¬¬ä¸€è¡Œçš„â€œç»„åâ€å•å…ƒæ ¼éœ€è¦ rowspan=2ï¼Œè®©å®ƒè·¨ä¸¤è¡Œæ˜¾ç¤º

          // --- ç¬¬ä¸€è¡Œï¼šä¸»å€¼ç­ ---
          const trPrimary = document.createElement('tr');
          trPrimary.className = 'is-primary';
          trPrimary.innerHTML = `
            <td class="group-cell" rowspan="2">${group.name}</td>
            <td><span class="role-badge role-primary">ä¸»å€¼ç­</span></td>
            <td class="name-cell">${group.primary.name}</td>
            <td><a href="tel:${group.primary.phone}" class="phone-link">${group.primary.phone}</a></td>
          `;
          tbody.appendChild(trPrimary);

          // --- ç¬¬äºŒè¡Œï¼šè¾…å€¼ç­ ---
          const trSecondary = document.createElement('tr');
          trSecondary.innerHTML = `
            <!-- æ³¨æ„ï¼šè¿™é‡Œä¸éœ€è¦å†™ç»„å td äº†ï¼Œå› ä¸ºä¸Šä¸€è¡Œ rowspan=2 å ä½äº† -->
            <td><span class="role-badge role-secondary">è¾…å€¼ç­</span></td>
            <td class="name-cell">${group.secondary.name}</td>
            <td><a href="tel:${group.secondary.phone}" class="phone-link">${group.secondary.phone}</a></td>
          `;
          tbody.appendChild(trSecondary);
        });
      })
      .catch(err => {
        const box = document.getElementById('error-box');
        box.style.display = 'block';
        box.innerHTML = `âš ï¸ æ•°æ®åŠ è½½å¼‚å¸¸: ${err.message}`;
        console.error(err);
      });
  </script>

</body>
</html>